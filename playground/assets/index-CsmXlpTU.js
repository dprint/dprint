import{C as te,E as re,K as ne,a as ie,M as oe,b as ue,P as ae,R as le,S as de,c as ce,T as fe,U as se,e as l,l as ve}from"./initialize-CT_4MriP.js";import{r as t}from"./index-Crk4G-UL.js";const m=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:te,Emitter:re,KeyCode:ne,KeyMod:ie,MarkerSeverity:oe,MarkerTag:ue,Position:ae,Range:le,Selection:de,SelectionDirection:ce,Token:fe,Uri:se,editor:l,languages:ve},Symbol.toStringTag,{value:"Module"}));function A(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function _(){}var R=function(){return R=Object.assign||function(e){for(var d,a=1,o=arguments.length;a<o;a++){d=arguments[a];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(e[u]=d[u])}return e},R.apply(this,arguments)};function ge(e,d){var a=e.width,o=a===void 0?"100%":a,u=e.height,j=u===void 0?"100%":u,D=e.value,v=D===void 0?null:D,V=e.defaultValue,B=V===void 0?"":V,W=e.language,s=W===void 0?"javascript":W,N=e.theme,p=N===void 0?null:N,P=e.options,M=P===void 0?{}:P,T=e.overrideServices,G=T===void 0?{}:T,k=e.editorWillMount,J=k===void 0?_:k,L=e.editorDidMount,Q=L===void 0?_:L,F=e.editorWillUnmount,X=F===void 0?_:F,H=e.onChange,I=H===void 0?_:H,$=e.className,g=$===void 0?null:$,U=e.original,E=U===void 0?null:U,i=e.originalUri,O=e.modifiedUri,b=t.useRef(null),r=t.useRef(null),w=t.useRef(null),S=t.useRef(null),K=A(o),q=A(j),Y=t.useMemo(function(){return{width:K,height:q}},[K,q]);t.useImperativeHandle(d,function(){return{get editor(){return r.current}}});var Z=function(){var n=J(m);return n||{}},ee=function(){Q(r.current,m);var n=r.current.getModel().modified;w.current=n.onDidChangeContent(function(c){S.current||I(n.getValue(),c)})},f=function(){X(r.current,m)},C=function(){var n=v??B,c=i?.(m),y=O?.(m),x=c&&l.getModel(c),z=y&&l.getModel(y);x?(x.setValue(E),l.setModelLanguage(x,s)):x=l.createModel(n,s,c),z?(x.setValue(n),l.setModelLanguage(z,s)):z=l.createModel(n,s,y),r.current.setModel({original:x,modified:z})};return t.useEffect(function(){b.current&&(Z(),r.current=l.createDiffEditor(b.current,R(R(R({},g?{extraEditorClassName:g}:{}),M),p?{theme:p}:{}),G),C(),ee())},[]),t.useEffect(function(){r.current&&r.current.updateOptions(R(R({},g?{extraEditorClassName:g}:{}),M))},[g,M]),t.useEffect(function(){r.current&&r.current.layout()},[o,j]),t.useEffect(function(){if(r.current){var n=r.current.getModel(),c=n.original,y=n.modified;l.setModelLanguage(c,s),l.setModelLanguage(y,s)}},[s]),t.useEffect(function(){if(r.current){var n=r.current.getModel().modified;S.current=!0,r.current.getModifiedEditor().pushUndoStop(),n.pushEditOperations([],[{range:n.getFullModelRange(),text:v}]),r.current.getModifiedEditor().pushUndoStop(),S.current=!1}},[v]),t.useEffect(function(){l.setTheme(p)},[p]),t.useEffect(function(){if(r.current){var n=r.current.getModel().original;E!==n.getValue()&&n.setValue(E)}},[E]),t.useEffect(function(){return function(){if(r.current){f(),r.current.dispose();var n=r.current.getModel(),c=n.original,y=n.modified;c&&c.dispose(),y&&y.dispose()}w.current&&w.current.dispose()}},[]),t.createElement("div",{ref:b,style:Y,className:"react-monaco-editor-container"})}var pe=t.forwardRef(ge);pe.displayName="MonacoDiffEditor";var h=function(){return h=Object.assign||function(e){for(var d,a=1,o=arguments.length;a<o;a++){d=arguments[a];for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(e[u]=d[u])}return e},h.apply(this,arguments)},he=function(e,d){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&d.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(e);u<o.length;u++)d.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(e,o[u])&&(a[o[u]]=e[o[u]]);return a};function me(e,d){var a=e.width,o=a===void 0?"100%":a,u=e.height,j=u===void 0?"100%":u,D=e.value,v=D===void 0?null:D,V=e.defaultValue,B=V===void 0?"":V,W=e.language,s=W===void 0?"javascript":W,N=e.theme,p=N===void 0?null:N,P=e.options,M=P===void 0?{}:P,T=e.overrideServices,G=T===void 0?{}:T,k=e.editorWillMount,J=k===void 0?_:k,L=e.editorDidMount,Q=L===void 0?_:L,F=e.editorWillUnmount,X=F===void 0?_:F,H=e.onChange,I=H===void 0?_:H,$=e.className,g=$===void 0?null:$,U=e.uri,E=t.useRef(null),i=t.useRef(null),O=t.useRef(null),b=t.useRef(null),r=A(o),w=A(j),S=t.useRef(I);S.current=I,t.useImperativeHandle(d,function(){return{get editor(){return i.current}}});var K=t.useMemo(function(){return{width:r,height:w}},[r,w]),q=function(){var f=J(m);return f||{}},Y=function(){Q(i.current,m),O.current=i.current.onDidChangeModelContent(function(f){var C;b.current||(C=S.current)===null||C===void 0||C.call(S,i.current.getValue(),f)})},Z=function(){X(i.current,m)},ee=function(){var f=v!==null?v:B;if(E.current){var C=h(h({},M),q()),n=U?.(m),c=n&&l.getModel(n);c?(c.setValue(f),l.setModelLanguage(c,s)):c=l.createModel(f,s,n),i.current=l.create(E.current,h(h(h({model:c},g?{extraEditorClassName:g}:{}),C),p?{theme:p}:{}),G),Y()}};return t.useEffect(ee,[]),t.useEffect(function(){if(i.current&&v!==null){if(v===i.current.getValue())return;var f=i.current.getModel();b.current=!0,i.current.pushUndoStop(),f.pushEditOperations([],[{range:f.getFullModelRange(),text:v}],void 0),i.current.pushUndoStop(),b.current=!1}},[v]),t.useEffect(function(){if(i.current){var f=i.current.getModel();l.setModelLanguage(f,s)}},[s]),t.useEffect(function(){if(i.current){M.model;var f=he(M,["model"]);i.current.updateOptions(h(h({},g?{extraEditorClassName:g}:{}),f))}},[g,M]),t.useEffect(function(){i.current&&i.current.layout()},[o,j]),t.useEffect(function(){l.setTheme(p)},[p]),t.useEffect(function(){return function(){i.current&&(Z(),i.current.dispose()),O.current&&O.current.dispose()}},[]),t.createElement("div",{ref:E,style:K,className:"react-monaco-editor-container"})}var Me=t.forwardRef(me);Me.displayName="MonacoEditor";export{pe as MonacoDiffEditor,Me as default,m as monaco};
